<!DOCTYPE html>
<html>

<head>
  <title>WebVR Bowling Game</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script>
  WebFontConfig = {
  custom: {
    families: ['px-grotesk'],
    urls: ['assets/fonts/px-grotesk/px-grotesk.css'],
  },
};
(function (d) {
  let wf = d.createElement('script'),
    s = d.scripts[0];
  wf.async = true;
  wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js';
  s.parentNode.insertBefore(wf, s);
}(document));
</script>
  <script type="text/javascript" src="/socket.io/socket.io.js"></script>
  <script type="text/javascript" src="https://webrtc.github.io/adapter/adapter-latest.js"></script>

  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/aframe@0.7.1/dist/aframe-master.min.js"></script>
  <script type="text/javascript" src="https://cdn.rawgit.com/donmccurdy/aframe-physics-system/v2.1.0/dist/aframe-physics-system.min.js"></script>
  <script type="text/javascript" src="js/vendor/aframe-glow.js"></script>
</head>

<body>
  <audio id="cones-hit-sound" src="assets/audio/cones-hit.mp3" preload='auto'></audio>

  <div class="react-mount main"></div>
  
  <a-scene class="section--off" physics="iterations: 20; gravity: -3.5; friction: 0.1; restitution: 0.5;">

    <a-camera>
      <a-cursor fuse="true" fuse-timeout="10" color="#2A2A9B" scale="1 1 1">
        <a-animation begin="click" easing="ease-in" attribute="scale" fill="backwards" to="0.1 0.1 0.1" dur="250"></a-animation>
        <a-animation begin="cursor-fusing" easing="ease-in" attribute="scale" dur="250" fill="backwards" to="0.1 0.1 0.1"></a-animation>
      </a-cursor>
    </a-camera>

    <!-- all assets -->
    <a-assets>
      <a-asset-item id="cone" src="/assets/collada/bowling-cone.dae"></a-asset-item>
      <a-asset-item id="triangle" src="/assets/collada/cones-indicator-triangle.dae"></a-asset-item>
      <a-asset-item id="bowling-alley" src="/assets/collada/bowling-alley.dae"></a-asset-item>
      <a-asset-item id="cones-box" src="/assets/collada/cones-box.dae"></a-asset-item>
      <a-asset-item id="players-table" src="/assets/collada/players-table.dae"></a-asset-item>
      <a-asset-item id="winners-crown" src="/assets/collada/winners-crown.dae"></a-asset-item>
      <a-asset-item id="ball-slider" src="/assets/collada/ball-slider.dae"></a-asset-item>
      <a-asset-item id="ball-slider-indicator" src="/assets/collada/ball-slider-indicator.dae"></a-asset-item>
      <a-asset-item id="strike" src="/assets/collada/strike-msg.dae"></a-asset-item>
      <a-asset-item id="arrow" src="/assets/collada/arrow.dae"></a-asset-item>
      <img id="face-ball" src="/assets/img/ball/ball-pic.jpg">
    </a-assets>

    <!-- TRIGGER -->
    <a-collada-model position="-0.437 4.723 -4.777" src="#arrow" rotation="-200 0 0" src="#arrow"></a-collada-model>
    <!-- Text -->
    <!-- First Throw -->
    <a-text id="first-throw" position="-0.446 3.9 -7" color="#d1b390" wrap-count="35" text="width:6; align:center; value: -" font="https://cdn.aframe.io/fonts/KelsonSans.fnt"></a-text>
    <!-- Second Throw -->
    <a-text id="second-throw" position="0.008 3.9 -7" color="#d1b390" wrap-count="35" text="width: 6; align:center; value: -" font="https://cdn.aframe.io/fonts/KelsonSans.fnt"></a-text>
    <!-- TOTAL -->
    <a-text id="total-score" position="0 3.2 -7" color="#2A2A9B" wrap-count="15" text="width:6; align:center; value: 0" font="https://cdn.aframe.io/fonts/KelsonSans.fnt"></a-text>

    <!-- STRIKE -->
    <!-- <a-collada-model src="#strike" id="strike-msg" position="-2.347 -4 -8.793" src="#strike" rotation="90 0 0" scale="0.2 0.2 0.2">
      <a-animation easing="ease-in-out" attribute="position" direction="alternate" repeat="1" delay="1000" dur="1500" to="-2.347 1.994 -8.793"></a-animation>
    </a-collada-model> -->

    <!-- Start Ball Rolling by clicking this button -->
    <a-text class="throw-message" opacity="1" position="0.048 -0.793 -6.82" color="#FFD9B7" wrap-count="15" text="width:3; align:center; value: THROW" font="https://cdn.aframe.io/fonts/KelsonSans.fnt">
      <a-animation begin="click" easing="ease-in-out" attribute="opacity" to="0" dur="600"></a-animation>
    </a-text>
    <a-box class="throw-message" opacity="1" id="start-button" position="0 -0.891 -7.098" width="1.5 "height="0.65" depth="0.05" color="#3737DD">
      <a-animation begin="click" easing="ease-in-out" attribute="opacity" to="0" dur="600"></a-animation>
    </a-box>

    <!-- Alley + Cones Box -->
    <a-collada-model static-body position="-4 -2.35 -5.52" scale="7.6 5 4.5" src="#bowling-alley"></a-collada-model>
    <a-collada-model position="-4 -2.35 -7" scale="7.6 5 4.5" src="#cones-box"></a-collada-model>

    <!-- Ball Directional Slider + Ball Directional Indicator -->
    <a-collada-model position="-1.38 -1.29 -4.86" rotation="-15 0 0" src="#ball-slider"></a-collada-model>
    <a-collada-model id="ball-pos" position="-1.45 -1.29 -4.86" rotation="-15 0 0" src="#ball-slider-indicator">
      <a-animation attribute="position" direction="alternate" dur="900" easing="ease-in-out" repeat="indefinite" to="1.22 -1.29 -4.86"></a-animation>
    </a-collada-model>

    <!--
      Player Positions
      3 | | 2
      4 | | 1
    -->
    <!-- table + players -->
    <a-collada-model position="-4 0 12" scale="7.6 5 4.5" src="#players-table"></a-collada-model>
    <!-- 1 + Crown -->
    <a-collada-model position="-5.28 1.082 6.474" rotation="10 0 15" scale="1.4 1 1.4" src="#winners-crown">
      <a-animation attribute="rotation" repeat="indefinite" to="10 360 15"></a-animation>
    </a-collada-model>
    <!-- score + playerhead  -->
    <a-text rotation="0 180 0" position="-5.3 2.5 6.5" wrap-count="20" text="align: center; width: 6; value: 130;" font="https://cdn.aframe.io/fonts/KelsonSans.fnt"></a-text>
    <a-sphere src="#face-ball" position="-5.3 .5 6.5" rotation="0 100 0" glow="c:1;p:3;color:#3737dd;scale:1.1;" radius=".85"></a-sphere>

    <!-- 2 -->
    <a-text rotation="0 180 0" position="-5.3 2.5 9" wrap-count="20" text="align: center; width: 6; value: 63;" font="https://cdn.aframe.io/fonts/KelsonSans.fnt"></a-text>
    <a-sphere src="#face-ball" position="-5.3 .5 9" rotation="0 100 0" radius=".85"></a-sphere>
    <!-- 3 -->
    <a-text rotation="0 180 0" position="5.3 2.5 9" wrap-count="20" text="align: center; width: 6; value: 90;" font="https://cdn.aframe.io/fonts/KelsonSans.fnt"></a-text>
    <a-sphere src="#face-ball" position="5.3 .5 9" rotation="0 100 0" radius=".85"></a-sphere>
    <!-- 4 -->
    <a-text rotation="0 180 0" position="5.3 2.5 6.5" wrap-count="20" text="align: center; width: 6; value: 10;" font="https://cdn.aframe.io/fonts/KelsonSans.fnt"></a-text>
    <a-sphere src="#face-ball" position="5.3 .5 6.5" rotation="0 100 0" radius=".85"></a-sphere>

    <!-- Cones indicator triangle -->
    <a-collada-model position="4 -0.8 -3.4" scale="1.5 1.5 1.5" src="#triangle"></a-collada-model>
    
    <!-- Cones indicator sphere -->
    <a-sphere data-id="10" class="cone-indicator" position="3.7 .40 -3.75" radius=".05" color="white"></a-sphere>
    <a-sphere data-id="9" class="cone-indicator" position="3.9 .40 -3.75" radius=".05" color="white"></a-sphere>
    <a-sphere data-id="8" class="cone-indicator" position="4.1 .40 -3.75" radius=".05" color="white"></a-sphere>
    <a-sphere data-id="7" class="cone-indicator" position="4.3 .40 -3.75" radius=".05" color="white"></a-sphere>
    <a-sphere data-id="6" class="cone-indicator" position="3.8 .25 -3.75" radius=".05" color="white"></a-sphere>
    <a-sphere data-id="5" class="cone-indicator" position="4 .25 -3.75" radius=".05" color="white"></a-sphere>
    <a-sphere data-id="4" class="cone-indicator" position="4.2 .25 -3.75" radius=".05" color="white"></a-sphere>
    <a-sphere data-id="3" class="cone-indicator" position="3.9 .1 -3.75" radius=".05" color="white"></a-sphere>
    <a-sphere data-id="2" class="cone-indicator" position="4.1 .1 -3.75" radius=".05" color="white"></a-sphere>
    <a-sphere data-id="1" class="cone-indicator" position="4 -.05 -3.75" radius=".05" color="white"></a-sphere>

    <a-sky color="#FFDEAF"></a-sky>
  </a-scene>
</body>

</html>
